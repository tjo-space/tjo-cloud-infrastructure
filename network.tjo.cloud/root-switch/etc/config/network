{{ $nodeName := getenv "NODE" }}
{{ $node := index (ds "config").nodes $nodeName }}

config interface 'loopback'
	option device 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fd74:6a6f:0::/48'

##
# INTERNAL
##
config interface 'internal'
	option device 'eth0'
	option proto  'dhcpv6'
  option reqaddress 'try'
  option reqprefix 'no'
  option norelease '1'

config interface 'internal_vip'
	option proto 'static'
	option device 'eth0'
	list ip6addr '{{ $node.internal.ipv6.address }}'

config route6 'internal6'
	option interface 'internal'
	option target 'fd74:6a6f::/32'
	option type 'unicast'

##
# LOCAL
##
config interface 'local'
	option device 'eth1'
	option proto  'none'
