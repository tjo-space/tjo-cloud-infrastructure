{{ $nodeName := getenv "NODE" }}
{{ $node := index (ds "config").nodes $nodeName }}

config interface 'loopback'
	option device 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix '{{ $node.local.ipv6.prefix }}'

##
# INTERNAL
##
config interface 'internal'
	option device 'eth0'
	option proto  'dhcpv6'

config interface 'internal_vip'
	option device 'eth0'
	option proto 'static'
	list ip6addr '{{ $node.internal.ipv6.address }}'

##
# LOCAL
##
config interface 'local'
	option device 'eth1'
	option proto  'static'
	list ip6addr '{{ $node.local.ipv6.address }}'
